{"version":3,"sources":["webpack://living-atlas-optica/webpack/runtime/chunk loaded","webpack://living-atlas-optica/./src/utils/URLHashParams.ts","webpack://living-atlas-optica/./src/store/reducers/UI.ts","webpack://living-atlas-optica/./src/constants/map.ts","webpack://living-atlas-optica/./src/store/reducers/Map.ts","webpack://living-atlas-optica/./src/store/reducers/rootReducer.ts","webpack://living-atlas-optica/./src/store/getPreloadedState.ts","webpack://living-atlas-optica/./src/store/configureStore.ts","webpack://living-atlas-optica/./src/contexts/AppContextProvider.tsx","webpack://living-atlas-optica/./src/components/AppLayout/AppLayout.tsx","webpack://living-atlas-optica/./src/components/ControlPanel/ToggleBtn.tsx","webpack://living-atlas-optica/./src/components/ControlPanel/PanelConfiguration.tsx","webpack://living-atlas-optica/./src/static/imagery.jpg","webpack://living-atlas-optica/./src/static/hybrid.jpg","webpack://living-atlas-optica/./src/static/human-geo-light.jpg","webpack://living-atlas-optica/./src/static/human-geo-dark.jpg","webpack://living-atlas-optica/./src/static/topo.jpg","webpack://living-atlas-optica/./src/static/vibrant.png","webpack://living-atlas-optica/./src/components/ControlPanel/WebMapSelector.tsx","webpack://living-atlas-optica/./src/hooks/useOnClickOutside.tsx","webpack://living-atlas-optica/./src/components/ControlPanel/ControlPanel.tsx","webpack://living-atlas-optica/./src/components/ControlPanel/ControlPanelContainer.tsx","webpack://living-atlas-optica/./src/components/ArcGIS/MapView.tsx","webpack://living-atlas-optica/./src/components/MapPanels/ExtentBox.tsx","webpack://living-atlas-optica/./src/components/MapPanels/MapPanel.tsx","webpack://living-atlas-optica/./src/components/MapPanels/ZoomLock.tsx","webpack://living-atlas-optica/./src/components/MapPanels/ScaleIndicator.tsx","webpack://living-atlas-optica/./src/components/MapPanels/MapPanelsContainer.tsx","webpack://living-atlas-optica/./src/index.tsx","webpack://living-atlas-optica/webpack/bootstrap","webpack://living-atlas-optica/webpack/runtime/compat get default export","webpack://living-atlas-optica/webpack/runtime/define property getters","webpack://living-atlas-optica/webpack/runtime/global","webpack://living-atlas-optica/webpack/runtime/hasOwnProperty shorthand","webpack://living-atlas-optica/webpack/runtime/publicPath","webpack://living-atlas-optica/webpack/runtime/jsonp chunk loading","webpack://living-atlas-optica/webpack/startup"],"names":["deferred","DEFAULT_HASH_PARAMS","urlFns","setHashParam","key","value","initialUIState","mapPanelsInfo","direction","num","isControlPanelVisible","slice","createSlice","name","initialState","reducers","mapPanelsInfoChanged","state","action","payload","isControlPanelVisibleToggled","reducer","actions","mapPanelsInfoSelector","createSelector","UI","isControlPanelVisibleSelector","WEB_MAP_ID_HYBRID","initialMapState","indexOfActiveMapPanel","center","lat","lon","zoom","zoomLevels","relativeZoomLevels","scales","extents","webmapId","isLoadingWebmap","isInvalidWebmapId","webmapIdChanged","invalidWebmapIdChanged","mapCenterChanged","extentsChanged","zoomLevelsChanged","scalesChanged","relativeZoomLevelsChanged","indexOfActiveMapPanelChanged","updateWebmapId","id","dispatch","getState","getItem","type","setInvalidWebmapIdToTrue","setTimeout","webmapIdSelector","Map","MapCenterSelector","extentsSelector","zoomLevelsSelector","scalesSelector","relativeZoomLevelsSelector","indexOfActiveMapPanelSelector","isInvalidWebmapIdSelector","combineReducers","getPreloadedUIState","layout","split","getPreloadedMapState","map","d","preloadedState","store","configureStore","rootReducer","middleware","getDefaultMiddleware","AppContext","createContext","children","useState","darkMode","init","React","Provider","useDispatch","useSelector","className","style","boxShadow","onClick","xmlns","viewBox","height","width","PanelIcon","panelInfo","isSelected","classNames","classnames","rects","i","push","margin","getRect","PanelIconsData","WEB_MAPS","title","thumbnail","hybrid_thumbnail","imagery_thumbnail","human_geo_light_thumbnail","human_dark_light_thumbnail","topo_thumbnail","vibrant_thumbnail","WebMapOption","data","isActive","bind","background","backgroundRepeat","backgroundSize","WebMapIdTextInput","val","setVal","placeholder","onChange","event","target","itemId","url","indexOf","search","param","decodeQueryString","webmap","getItemId","fill","onChangeHandler","activeWebmapId","groups","forEach","index","groupIdx","Math","floor","elements","idx","ref","handler","useEffect","listener","targetElement","current","contains","document","addEventListener","removeEventListener","Title","CloseBtn","containerRef","useRef","useOnClickOutside","loadCss","isActiveMapPanel","centerOnChange","zoomOnChange","extentOnChange","scaleOnChange","mapDivRef","isActiveMapRef","shouldTriggerExtentOnChangeRef","mapContainerSizeRef","mapView","setMapView","initMapView","loadModules","MapView","WebMap","Zoom","view","container","portalItem","navigation","mouseWheelZoomEnabled","browserTouchPanEnabled","constraints","rotationEnabled","ui","components","color","zoomWidget","add","when","updateWebmap","canZoomRef","addMouseWheelEvent","on","mapViewNavigation","deltaY","scaleFactor","promise","then","end","addWatchEvent","watchUtils","watch","longitude","latitude","whenTrue","extent","toFixed","containerSize","scale","goTo","duration","position","top","left","bottom","right","child","indexOfTargetMap","indexOfContainerMap","extentOfTargetMapRef","prevZoomRef","pos","setPos","calcPos","extentString","JSON","parse","xmin","ymin","xmax","ymax","spatialReference","Point","pointMin","x","y","pointMax","screenPointMin","toScreen","screenPointMax","abs","ext1","ext2","diffX1","diffY1","diffX2","diffY2","display","isActivePanel","newZoom","mapPanelIndex","targetVal","adjustedRelativeZoomLevels","newZoomeLevels","currZoom","join","updateZoomLevels","newExtents","stringify","toJSON","updateExtents","newScales","updateScale","extentBoxes","getExtentBoxes","LockedIcon","UnlockedIcon","placeOnLeftSide","isUnlocked","SIZE","justifyContent","alignItems","borderRadius","textShadow","numberFns","isHorizontal","idxOfActiveMapPanel","panels","shouldShowZoomLock","shouldShowBorder","onMouseEnter","shouldUnlock","newRelativeZoomLevels","getPanels","getPreloadedState","ReactDOM","configureAppStore","getElementById","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","__webpack_modules__","call","m","O","result","chunkIds","fn","priority","notFulfilled","Infinity","length","fulfilled","j","Object","keys","every","splice","n","getter","__esModule","a","definition","o","defineProperty","enumerable","get","g","globalThis","this","Function","e","window","obj","prop","prototype","hasOwnProperty","scriptUrl","importScripts","location","currentScript","src","scripts","getElementsByTagName","Error","replace","p","installedChunks","179","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","chunkLoadingGlobal","self","__webpack_exports__"],"mappings":"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","file":"main.522c96afa3bccad21cff.js","sourcesContent":["var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tresult = fn();\n\t\t}\n\t}\n\treturn result;\n};","import { urlFns } from 'helper-toolkit-ts';\n\ntype UrlHashParamKey = 'center' | 'zoom' | 'layout' | 'webmapId';\n\ntype HashParams = Record<UrlHashParamKey, string>;\n\nexport const DEFAULT_HASH_PARAMS: HashParams = urlFns.parseHash();\n\nexport const setHashParam = (key: UrlHashParamKey, value: string) => {\n    urlFns.updateHashParam({\n        key,\n        value,\n    });\n};\n","import {\n    createSlice,\n    createSelector,\n    PayloadAction,\n    // createAsyncThunk\n} from '@reduxjs/toolkit';\nimport { setHashParam } from '../../utils/URLHashParams';\n\nimport { RootState, StoreDispatch, StoreGetState } from '../configureStore';\n\nexport type MapPanelsDirection = 'horizontal' | 'vertical';\n\nexport type MapPanelsInfo = {\n    direction?: MapPanelsDirection;\n    num?: number;\n};\n\nexport type UIState = {\n    mapPanelsInfo?: MapPanelsInfo;\n    isControlPanelVisible?: boolean;\n};\n\nexport const initialUIState: UIState = {\n    mapPanelsInfo: {\n        direction: 'horizontal',\n        num: 3,\n    },\n    isControlPanelVisible: false,\n};\n\nconst slice = createSlice({\n    name: 'UI',\n    initialState: initialUIState,\n    reducers: {\n        mapPanelsInfoChanged: (state, action: PayloadAction<MapPanelsInfo>) => {\n            state.mapPanelsInfo = action.payload;\n        },\n        isControlPanelVisibleToggled: (state) => {\n            state.isControlPanelVisible = !state.isControlPanelVisible;\n        },\n    },\n});\n\nconst { reducer } = slice;\n\nexport const {\n    mapPanelsInfoChanged,\n    isControlPanelVisibleToggled,\n} = slice.actions;\n\nexport const updatePanelsLayout = (layout: MapPanelsInfo) => (\n    dispatch: StoreDispatch,\n    getState: StoreGetState\n) => {\n    const { direction, num } = layout;\n    setHashParam('layout', `${direction},${num}`);\n    dispatch(mapPanelsInfoChanged(layout));\n};\n\nexport const mapPanelsInfoSelector = createSelector(\n    (state: RootState) => state.UI.mapPanelsInfo,\n    (mapPanelsInfo) => mapPanelsInfo\n);\n\nexport const isControlPanelVisibleSelector = createSelector(\n    (state: RootState) => state.UI.isControlPanelVisible,\n    (isControlPanelVisible) => isControlPanelVisible\n);\n\nexport default reducer;\n","// topo webmap\n// export const WEB_MAP_ID = '5f3b7605b3364e7bb2416c93fae00995';\n\n// // imagery webmap\nexport const WEB_MAP_ID = 'd507d08f4959438687caf2914854d8d4';\n\nexport const WEB_MAP_ID_IMAGERY = '5226eb89ecb94252aee274671241c8d1';\nexport const WEB_MAP_ID_HYBRID = 'd507d08f4959438687caf2914854d8d4';\nexport const WEB_MAP_ID_HUMAN_GEO_LIGHT = '3582b744bba84668b52a16b0b6942544';\nexport const WEB_MAP_ID_HUMAN_GEO_DARK = '4f2e99ba65e34bb8af49733d9778fb8e';\nexport const WEB_MAP_ID_TOPO = '5f3b7605b3364e7bb2416c93fae00995';\nexport const WEB_MAP_ID_VIBRANT = 'd27a3805595e4bb598678f2dc3b1fca3';\n","import {\n    createSlice,\n    createSelector,\n    PayloadAction,\n    // createAsyncThunk\n} from '@reduxjs/toolkit';\nimport { WEB_MAP_ID_HYBRID } from '../../constants/map';\n\nimport { RootState, StoreDispatch, StoreGetState } from '../configureStore';\n\nimport IExtent from 'esri/geometry/Extent';\n\nimport { getItem } from '@esri/arcgis-rest-portal';\nimport { setHashParam } from '../../utils/URLHashParams';\n\nexport type MapCenter = {\n    lat?: number;\n    lon?: number;\n};\n\nexport type MapState = {\n    indexOfActiveMapPanel?: number;\n    center?: MapCenter;\n    zoom?: number;\n    zoomLevels?: number[];\n    relativeZoomLevels?: number[];\n    scales?: number[];\n    // extents JSON of each map panel as an array of strings\n    extents?: string[];\n    webmapId?: string;\n    isLoadingWebmap?: boolean;\n    isInvalidWebmapId?: boolean;\n};\n\nexport const initialMapState: MapState = {\n    indexOfActiveMapPanel: -1,\n    center: {\n        lat: 34.05624,\n        lon: -117.1957,\n    },\n    zoom: 10,\n    zoomLevels: [10, 12, 14],\n    relativeZoomLevels: [-2, 0, 2],\n    scales: [0, 0, 0],\n    extents: [],\n    webmapId: WEB_MAP_ID_HYBRID,\n    isLoadingWebmap: false,\n    isInvalidWebmapId: false,\n};\n\nconst slice = createSlice({\n    name: 'Map',\n    initialState: initialMapState,\n    reducers: {\n        webmapIdChanged: (state, action: PayloadAction<string>) => {\n            state.webmapId = action.payload;\n            state.isInvalidWebmapId = false;\n        },\n        invalidWebmapIdChanged: (state, action: PayloadAction<boolean>) => {\n            state.isInvalidWebmapId = action.payload;\n        },\n        mapCenterChanged: (state, action: PayloadAction<MapCenter>) => {\n            state.center = action.payload;\n        },\n        extentsChanged: (state, action: PayloadAction<string[]>) => {\n            state.extents = action.payload;\n        },\n        zoomLevelsChanged: (state, action: PayloadAction<number[]>) => {\n            state.zoomLevels = action.payload;\n        },\n        scalesChanged: (state, action: PayloadAction<number[]>) => {\n            state.scales = action.payload;\n        },\n        relativeZoomLevelsChanged: (state, action: PayloadAction<number[]>) => {\n            state.relativeZoomLevels = action.payload;\n        },\n        indexOfActiveMapPanelChanged: (\n            state,\n            action: PayloadAction<number>\n        ) => {\n            state.indexOfActiveMapPanel = action.payload;\n        },\n    },\n});\n\nconst { reducer } = slice;\n\nexport const {\n    webmapIdChanged,\n    mapCenterChanged,\n    zoomLevelsChanged,\n    relativeZoomLevelsChanged,\n    indexOfActiveMapPanelChanged,\n    extentsChanged,\n    invalidWebmapIdChanged,\n    scalesChanged,\n} = slice.actions;\n\nexport const toggleLockRelativeZoomLevels = (mapPanelIndex: number) => (\n    dispatch: StoreDispatch,\n    getState: StoreGetState\n) => {\n    const { Map } = getState();\n    const { zoomLevels, relativeZoomLevels } = Map;\n\n    const shouldUnlock =\n        relativeZoomLevels[mapPanelIndex] !== null &&\n        relativeZoomLevels[mapPanelIndex + 1] !== null;\n\n    const newRelativeZoomLevels = [...relativeZoomLevels];\n\n    if (mapPanelIndex === 0) {\n        newRelativeZoomLevels[0] = shouldUnlock\n            ? null\n            : zoomLevels[0] - zoomLevels[1];\n    } else if (mapPanelIndex === 1) {\n        newRelativeZoomLevels[2] = shouldUnlock\n            ? null\n            : zoomLevels[2] - zoomLevels[1];\n    }\n\n    dispatch(relativeZoomLevelsChanged(newRelativeZoomLevels));\n};\n\nexport const updateZoomLevels = (zoom: number, mapPanelIndex: number) => (\n    dispatch: StoreDispatch,\n    getState: StoreGetState\n) => {\n    const { Map } = getState();\n    const { zoomLevels, relativeZoomLevels } = Map;\n\n    if (zoomLevels[mapPanelIndex] === zoom) {\n        return;\n    }\n\n    // lock && lock: [-2, 0, 2]\n    // unlock && lock: [null, 0, 2]\n    // lock && unlock: [-2, 0, null]\n    // unlock && unlock: [null, 0, null]\n\n    const targetVal = relativeZoomLevels[mapPanelIndex];\n\n    const adjustedRelativeZoomLevels = relativeZoomLevels.map((val) => {\n        if (val === null || targetVal === null) {\n            return null;\n        }\n\n        return val - targetVal;\n    });\n\n    // console.log(adjustedRelativeZoomLevels)\n\n    const newZoomeLevels = zoomLevels.map((currZoom, i) => {\n        if (mapPanelIndex === i) {\n            return zoom;\n        }\n\n        if (adjustedRelativeZoomLevels[i] === null) {\n            return currZoom;\n        }\n\n        return zoom + adjustedRelativeZoomLevels[i];\n    });\n\n    // console.log(newZoomeLevels)\n\n    // console.log(zoomLevels, newZoomeLevels);\n\n    dispatch(zoomLevelsChanged(newZoomeLevels));\n\n    setHashParam('zoom', newZoomeLevels.join(','));\n};\n\nexport const updateExtents = (extent: IExtent, mapPanelIndex: number) => (\n    dispatch: StoreDispatch,\n    getState: StoreGetState\n) => {\n    const { Map } = getState();\n    const { extents } = Map;\n\n    const newExtents = [...extents];\n\n    newExtents[mapPanelIndex] = JSON.stringify(extent.toJSON());\n\n    dispatch(extentsChanged(newExtents));\n};\n\nexport const updateScale = (scale: number, mapPanelIndex: number) => (\n    dispatch: StoreDispatch,\n    getState: StoreGetState\n) => {\n    const { Map } = getState();\n    const { scales } = Map;\n\n    const newScales = [...scales];\n\n    newScales[mapPanelIndex] = scale;\n\n    dispatch(scalesChanged(newScales));\n};\n\nexport const updateWebmapId = (id: string) => async (\n    dispatch: StoreDispatch,\n    getState: StoreGetState\n) => {\n    try {\n        const itemData = await getItem(id);\n\n        if (itemData.type !== 'Web Map') {\n            dispatch(setInvalidWebmapIdToTrue());\n        } else {\n            dispatch(webmapIdChanged(id));\n            setHashParam('webmapId', id);\n        }\n    } catch (err) {\n        dispatch(setInvalidWebmapIdToTrue());\n    }\n};\n\nconst setInvalidWebmapIdToTrue = () => async (\n    dispatch: StoreDispatch,\n    getState: StoreGetState\n) => {\n    dispatch(invalidWebmapIdChanged(true));\n\n    setTimeout(() => {\n        dispatch(invalidWebmapIdChanged(false));\n    }, 5000);\n};\n\nexport const webmapIdSelector = createSelector(\n    (state: RootState) => state.Map.webmapId,\n    (webmapId) => webmapId\n);\n\nexport const MapCenterSelector = createSelector(\n    (state: RootState) => state.Map.center,\n    (center) => center\n);\n\nexport const extentsSelector = createSelector(\n    (state: RootState) => state.Map.extents,\n    (extents) => extents\n);\n\nexport const zoomLevelsSelector = createSelector(\n    (state: RootState) => state.Map.zoomLevels,\n    (zoomLevels) => zoomLevels\n);\n\nexport const scalesSelector = createSelector(\n    (state: RootState) => state.Map.scales,\n    (scales) => scales\n);\n\nexport const relativeZoomLevelsSelector = createSelector(\n    (state: RootState) => state.Map.relativeZoomLevels,\n    (relativeZoomLevels) => relativeZoomLevels\n);\n\nexport const indexOfActiveMapPanelSelector = createSelector(\n    (state: RootState) => state.Map.indexOfActiveMapPanel,\n    (indexOfActiveMapPanel) => indexOfActiveMapPanel\n);\n\nexport const isInvalidWebmapIdSelector = createSelector(\n    (state: RootState) => state.Map.isInvalidWebmapId,\n    (isInvalidWebmapId) => isInvalidWebmapId\n);\n\nexport default reducer;\n","import { combineReducers } from 'redux';\nimport UI from './UI';\nimport Map from './Map';\n\nexport default combineReducers({\n    UI,\n    Map,\n});\n","import { PartialRootState } from './configureStore';\n\nimport {\n    initialUIState,\n    MapPanelsDirection,\n    UIState,\n} from '../store/reducers/UI';\nimport { initialMapState, MapState } from './reducers/Map';\n\nimport { DEFAULT_HASH_PARAMS } from '../utils/URLHashParams';\n\nconst getPreloadedUIState = (): UIState => {\n    const { layout } = DEFAULT_HASH_PARAMS;\n\n    const state: UIState = {\n        ...initialUIState,\n    };\n\n    if (layout) {\n        const [direction, num] = layout.split(',');\n\n        state.mapPanelsInfo = {\n            direction: direction as MapPanelsDirection,\n            num: +num,\n        };\n    }\n\n    return state;\n};\n\nconst getPreloadedMapState = (): MapState => {\n    const { zoom, webmapId, center } = DEFAULT_HASH_PARAMS;\n\n    const state: MapState = {\n        ...initialMapState,\n    };\n\n    if (webmapId) {\n        state.webmapId = webmapId;\n    }\n\n    if (center) {\n        const [lon, lat] = center.split(',').map((d) => +d);\n\n        state.center = {\n            lon,\n            lat,\n        };\n    }\n\n    if (zoom) {\n        const zoomLevels = zoom.split(',').map((d) => +d);\n        const relativeZoomLevels: number[] = [\n            zoomLevels[0] - zoomLevels[1],\n            0,\n            zoomLevels[2] - zoomLevels[1],\n        ];\n        state.zoomLevels = zoomLevels;\n        state.relativeZoomLevels = relativeZoomLevels;\n    }\n\n    return state;\n};\n\nconst getPreloadedState = (): PartialRootState => {\n    return {\n        UI: getPreloadedUIState(),\n        Map: getPreloadedMapState(),\n    };\n};\n\nexport default getPreloadedState;\n","import {\n    configureStore,\n    getDefaultMiddleware,\n    DeepPartial,\n} from '@reduxjs/toolkit';\n\nimport rootReducer from './reducers/rootReducer';\n\nimport getPreloadedState from './getPreloadedState';\n\nexport type RootState = ReturnType<typeof rootReducer>;\n\nexport type PartialRootState = DeepPartial<RootState>;\n\nconst configureAppStore = (preloadedState: PartialRootState = {}) => {\n    const store = configureStore({\n        reducer: rootReducer,\n        middleware: [...getDefaultMiddleware<RootState>()],\n        preloadedState,\n    });\n\n    return store;\n};\n\nexport type StoreDispatch = ReturnType<typeof configureAppStore>['dispatch'];\n\nexport type StoreGetState = ReturnType<typeof configureAppStore>['getState'];\n\nexport { getPreloadedState };\n\nexport default configureAppStore;\n","import React, { useState, createContext } from 'react';\n\ntype AppContextValue = {\n    darkMode: boolean;\n};\n\ntype AppContextProviderProps = {\n    children?: React.ReactNode;\n};\n\nexport const AppContext = createContext<AppContextValue>(null);\n\nconst AppContextProvider: React.FC<AppContextProviderProps> = ({\n    children,\n}: AppContextProviderProps) => {\n    const [value, setValue] = useState<AppContextValue>({\n        darkMode: false,\n    });\n\n    const init = async () => {\n        // const contextValue: AppContextValue = {\n        //     darkMode: false\n        // };\n        // setValue(contextValue);\n    };\n\n    React.useEffect(() => {\n        init();\n    }, []);\n\n    return (\n        <AppContext.Provider value={value}>\n            {value ? children : null}\n        </AppContext.Provider>\n    );\n};\n\nexport default AppContextProvider;\n","import React from 'react';\n\nimport { MapPanels, ControlPanel, ControlPanelToggleBtn } from '../';\n\nconst AppLayout = () => {\n    return (\n        <>\n            <MapPanels />\n            <ControlPanel />\n            <ControlPanelToggleBtn />\n        </>\n    );\n};\n\nexport default AppLayout;\n","import React from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport {\n    isControlPanelVisibleSelector,\n    isControlPanelVisibleToggled,\n} from '../../store/reducers/UI';\n\nconst ToggleBtn = () => {\n    const dispatch = useDispatch();\n\n    const isVisible = useSelector(isControlPanelVisibleSelector);\n\n    const onClickHandler = () => {\n        dispatch(isControlPanelVisibleToggled());\n        // console.log('foo')\n    };\n\n    if (isVisible) {\n        return null;\n    }\n\n    return (\n        <>\n            {/* <div\n                className=\"absolute\"\n                style={{\n                    height: 100,\n                    width: 100,\n                    top: -50,\n                    left: -50,\n                    background: 'radial-gradient(circle, rgba(0,0,0,9) 0%, rgba(0,0,0,.1) 75%,  rgba(0,0,0,0) 100%)'\n                }}\n            >\n            </div> */}\n\n            <div\n                className=\"absolute top-2 left-2 p-1 z-10 bg-black bg-opacity-75 hover:bg-opacity-90 text-white cursor-pointer\"\n                style={{\n                    boxShadow: '0 0 1px 1px rgba(0,0,0,.95)',\n                }}\n                onClick={onClickHandler}\n            >\n                <svg\n                    xmlns=\"http://www.w3.org/2000/svg\"\n                    className=\"fill-current\"\n                    viewBox=\"0 0 24 24\"\n                    height=\"24\"\n                    width=\"24\"\n                >\n                    <path d=\"M3 5h18v1H3zm0 8h18v-1H3zm0 7h18v-1H3z\" />\n                </svg>\n            </div>\n        </>\n    );\n};\n\nexport default ToggleBtn;\n","import React, { FC } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport {\n    MapPanelsDirection,\n    mapPanelsInfoChanged,\n    mapPanelsInfoSelector,\n    updatePanelsLayout,\n} from '../../store/reducers/UI';\nimport classnames from 'classnames';\n\ntype PanelIconProps = {\n    direction: MapPanelsDirection;\n    num: number;\n};\n\nconst PanelIcon: FC<PanelIconProps> = ({ direction, num }: PanelIconProps) => {\n    const dispatch = useDispatch();\n\n    const panelInfo = useSelector(mapPanelsInfoSelector);\n\n    const isSelected =\n        panelInfo.direction === direction && panelInfo.num === num;\n\n    const onClickHandler = () => {\n        dispatch(updatePanelsLayout({ direction, num }));\n    };\n\n    const getRect = () => {\n        const rects: JSX.Element[] = [];\n\n        for (let i = 0; i < num; i++) {\n            rects.push(\n                <div\n                    className={classnames('flex-grow', {\n                        'bg-gray-50': !isSelected,\n                        'bg-white': isSelected,\n                    })}\n                    style={{\n                        margin: 1,\n                    }}\n                    key={`${direction}-${num}-${i}`}\n                ></div>\n            );\n        }\n\n        return rects;\n    };\n\n    const classNames = classnames('cursor-pointer mx-1 mb-2 p-1 flex border', {\n        'flex-col': direction === 'vertical',\n        'border-gray-50': !isSelected,\n        'opacity-50': !isSelected,\n        'border-white': isSelected,\n    });\n\n    return (\n        <div\n            className={classNames}\n            style={{\n                height: 62,\n                width: 100,\n            }}\n            onClick={onClickHandler}\n        >\n            {getRect()}\n        </div>\n    );\n};\n\nconst PanelIconsData: PanelIconProps[] = [\n    {\n        direction: 'horizontal',\n        num: 2,\n    },\n    {\n        direction: 'horizontal',\n        num: 3,\n    },\n    {\n        direction: 'vertical',\n        num: 2,\n    },\n    {\n        direction: 'vertical',\n        num: 3,\n    },\n];\n\nconst PanelConfiguration = () => {\n    return (\n        <div className=\"md:border-r border-white border-opacity-30 md:mr-7\">\n            <h5 className=\"mb-2\">Panel configuration</h5>\n            <div className=\"cursor-pointer flex flex-wrap w-60\">\n                {PanelIconsData.map(({ direction, num }) => {\n                    return (\n                        <PanelIcon\n                            key={`${direction}-${num}`}\n                            direction={direction}\n                            num={num}\n                        />\n                    );\n                })}\n            </div>\n        </div>\n    );\n};\n\nexport default PanelConfiguration;\n","export default __webpack_public_path__ + \"e95afdaa53cdaaa1660def75b2a6d42f.jpg\";","export default __webpack_public_path__ + \"03fd43f82b7c26bbcd5bfbe8b6df62d4.jpg\";","export default __webpack_public_path__ + \"b5dca04e5cc67a469ba7cb9ea62cc066.jpg\";","export default __webpack_public_path__ + \"926c9f9b73e2d71d120577d50283afea.jpg\";","export default __webpack_public_path__ + \"23dc91edbb045ee443069f5fad21570b.jpg\";","export default __webpack_public_path__ + \"f4e467b4f7054ffcfe4c5b11cf8290b7.png\";","import React, { FC, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport {\n    WEB_MAP_ID_HUMAN_GEO_DARK,\n    WEB_MAP_ID_HUMAN_GEO_LIGHT,\n    WEB_MAP_ID_HYBRID,\n    WEB_MAP_ID_IMAGERY,\n    WEB_MAP_ID_TOPO,\n    WEB_MAP_ID_VIBRANT,\n} from '../../constants/map';\nimport {\n    isInvalidWebmapIdSelector,\n    updateWebmapId,\n    webmapIdChanged,\n    webmapIdSelector,\n} from '../../store/reducers/Map';\n\nimport imagery_thumbnail from '../../static/imagery.jpg';\nimport hybrid_thumbnail from '../../static/hybrid.jpg';\nimport human_geo_light_thumbnail from '../../static/human-geo-light.jpg';\nimport human_dark_light_thumbnail from '../../static/human-geo-dark.jpg';\nimport topo_thumbnail from '../../static/topo.jpg';\nimport vibrant_thumbnail from '../../static/vibrant.png';\nimport classnames from 'classnames';\nimport { decodeQueryString } from '@esri/arcgis-rest-request';\n\ntype WebMapInfo = {\n    title: string;\n    id: string;\n    thumbnail: any;\n};\n\nexport const WEB_MAPS: WebMapInfo[] = [\n    {\n        title: 'Imagery With Label',\n        id: WEB_MAP_ID_HYBRID,\n        thumbnail: hybrid_thumbnail,\n    },\n    {\n        title: 'Imagery',\n        id: WEB_MAP_ID_IMAGERY,\n        thumbnail: imagery_thumbnail,\n    },\n    {\n        title: 'Human Geo Light',\n        id: WEB_MAP_ID_HUMAN_GEO_LIGHT,\n        thumbnail: human_geo_light_thumbnail,\n    },\n    {\n        title: 'Human Geo Dark',\n        id: WEB_MAP_ID_HUMAN_GEO_DARK,\n        thumbnail: human_dark_light_thumbnail,\n    },\n    {\n        title: 'Terrain',\n        id: WEB_MAP_ID_TOPO,\n        thumbnail: topo_thumbnail,\n    },\n    {\n        title: 'Vibrant',\n        id: WEB_MAP_ID_VIBRANT,\n        thumbnail: vibrant_thumbnail,\n    },\n];\n\ntype PropsWebMapOption = {\n    data: WebMapInfo;\n    isActive: boolean;\n    onClick: (id: string) => void;\n};\n\nconst WebMapOption: FC<PropsWebMapOption> = ({\n    data,\n    isActive,\n    onClick,\n}: PropsWebMapOption) => {\n    const { title, id, thumbnail } = data;\n\n    return (\n        <div key={id} className=\"flex items-center mb-2\">\n            <div\n                className={classnames('cursor-pointer border', {\n                    'border-white': isActive,\n                    'border-gray-50': !isActive,\n                    'opacity-60': !isActive,\n                })}\n                onClick={onClick.bind(null, id)}\n                style={{\n                    height: 62,\n                    width: 62,\n                    background: `url(${thumbnail}) center center`,\n                    backgroundRepeat: 'no-repeat',\n                    backgroundSize: 'cover',\n                }}\n            ></div>\n\n            <div className=\"ml-3\">\n                <span className=\"text-sm\">{title}</span>\n            </div>\n        </div>\n    );\n};\n\nconst getItemId = (url: string) => {\n    if (url.indexOf('?') === -1) {\n        return '';\n    }\n\n    const [path, search] = url.split('?');\n\n    const param = decodeQueryString(search);\n\n    return param.webmap || param.id || '';\n};\n\nconst WebMapIdTextInput = () => {\n    const dispatch = useDispatch();\n\n    const [val, setVal] = useState<string>('');\n\n    const isInvalidWebmapId = useSelector(isInvalidWebmapIdSelector);\n\n    const handleChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n        setVal(event.target.value);\n    };\n\n    const onClickHandler = () => {\n        const itemId = getItemId(val);\n\n        dispatch(updateWebmapId(itemId));\n    };\n\n    return (\n        <div className=\"pb-2\">\n            <h5 className=\"text-sm text-gray-200 mb-1\">\n                {isInvalidWebmapId\n                    ? 'Invalid Item Id'\n                    : 'Any ArcGIS Online 2D Web Map'}\n            </h5>\n\n            <div className=\"flex items-stretch\">\n                <input\n                    type=\"text\"\n                    placeholder=\"Web Map link\"\n                    className=\"bg-transparent border border-r-0 border-gray-500 p-2 placeholder-opacity-50 text-sm\"\n                    value={val}\n                    onChange={handleChange}\n                />\n\n                <div\n                    className={classnames(\n                        'flex justify-center items-center w-10 border border-gray-500',\n                        {\n                            'text-gray-700': val === '',\n                            'text-gray-200': val !== '',\n                            'cursor-pointer': val !== '',\n                            'pointer-events-none': val === '',\n                        }\n                    )}\n                    onClick={onClickHandler}\n                >\n                    <svg\n                        xmlns=\"http://www.w3.org/2000/svg\"\n                        className=\"fill-current\"\n                        viewBox=\"0 0 24 24\"\n                        height=\"24\"\n                        width=\"24\"\n                    >\n                        <path d=\"M6 1.773l15 10.23L6 22.226z\" />\n                        <path fill=\"none\" d=\"M0 0h24v24H0z\" />\n                    </svg>\n                </div>\n            </div>\n        </div>\n    );\n};\n\nconst WebMapSelector = () => {\n    const dispatch = useDispatch();\n\n    const onChangeHandler = (id: string) => {\n        dispatch(updateWebmapId(id));\n    };\n\n    const activeWebmapId = useSelector(webmapIdSelector);\n\n    const groups: JSX.Element[][] = [];\n\n    const getOptions = () => {\n        WEB_MAPS.forEach((data, index) => {\n            const groupIdx = Math.floor(index / 2);\n\n            groups[groupIdx] = groups[groupIdx] || [];\n\n            groups[groupIdx].push(\n                <WebMapOption\n                    key={data.id}\n                    data={data}\n                    isActive={data.id === activeWebmapId}\n                    onClick={onChangeHandler}\n                />\n            );\n        });\n\n        return (\n            <div className=\"md:flex\">\n                <div className=\"flex\">\n                    {groups.map((elements, idx) => {\n                        return (\n                            <div key={idx} className=\"mr-4\">\n                                {elements}\n                            </div>\n                        );\n                    })}\n                </div>\n\n                <div className=\"flex items-end mt-2 md:mt-0 md:ml-2\">\n                    <WebMapIdTextInput />\n                </div>\n            </div>\n        );\n    };\n\n    return (\n        <div className=\"\">\n            <h5 className=\"mb-2\">Map</h5>\n            {getOptions()}\n        </div>\n    );\n};\n\nexport default WebMapSelector;\n","import React, { useEffect } from 'react';\n\nconst useOnClickOutside = (\n    ref: React.MutableRefObject<HTMLDivElement>,\n    handler: (event: MouseEvent) => void\n) => {\n    useEffect(\n        () => {\n            const listener = (event: MouseEvent) => {\n                const targetElement = event.target as HTMLElement;\n\n                // Do nothing if clicking ref's element or descendent elements\n                if (!ref.current || ref.current.contains(targetElement)) {\n                    return;\n                }\n\n                handler(event);\n            };\n\n            document.addEventListener('mousedown', listener);\n            document.addEventListener('touchstart', listener);\n\n            return () => {\n                document.removeEventListener('mousedown', listener);\n                document.removeEventListener('touchstart', listener);\n            };\n        },\n\n        // Add ref and handler to effect dependencies\n        // It's worth noting that because passed in handler is a new ...\n        // ... function on every render that will cause this effect ...\n        // ... callback/cleanup to run every render. It's not a big deal ...\n        // ... but to optimize you can wrap handler in useCallback before ...\n        // ... passing it into this hook.\n        [ref, handler]\n    );\n};\n\nexport default useOnClickOutside;\n","import React, { useRef } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { isControlPanelVisibleToggled } from '../../store/reducers/UI';\nimport PanelConfiguration from './PanelConfiguration';\nimport WebMapSelector from './WebMapSelector';\nimport useOnClickOutside from '../../hooks/useOnClickOutside';\n\nconst Title = () => {\n    return (\n        <div className=\"text-xl\">\n            <h5>\n                {/* Living Atlas{' '} */}\n                <span className=\"font-medium text-white\">Optica</span>\n            </h5>\n        </div>\n    );\n};\n\nconst CloseBtn = () => {\n    const dispatch = useDispatch();\n\n    const onClickHandler = () => {\n        dispatch(isControlPanelVisibleToggled());\n    };\n\n    return (\n        <div\n            className=\"absolute top-1 left-1 text-white cursor-pointer\"\n            onClick={onClickHandler}\n        >\n            <svg\n                xmlns=\"http://www.w3.org/2000/svg\"\n                viewBox=\"0 0 32 32\"\n                height=\"32\"\n                width=\"32\"\n                className=\"fill-current\"\n            >\n                <path d=\"M23.985 8.722L16.707 16l7.278 7.278-.707.707L16 16.707l-7.278 7.278-.707-.707L15.293 16 8.015 8.722l.707-.707L16 15.293l7.278-7.278z\" />\n                <path fill=\"none\" d=\"M0 0h32v32H0z\" />\n            </svg>\n        </div>\n    );\n};\n\nconst ControlPanel = () => {\n    const dispatch = useDispatch();\n\n    const containerRef = useRef<HTMLDivElement>();\n\n    const handleClickOutside = () => {\n        dispatch(isControlPanelVisibleToggled());\n    };\n\n    useOnClickOutside(containerRef, handleClickOutside);\n\n    return (\n        <div\n            ref={containerRef}\n            className=\"absolute top-0 left-0 right-0 py-2 pb-4 px-14 text-gray-200 z-10 animate-fade-in\"\n            style={{\n                background: `\n                    linear-gradient(\n                        to bottom,\n                        rgba(0, 0, 0, 1) 0%,\n                        rgba(0, 0, 0, .6) 100%\n                    )\n                `,\n            }}\n        >\n            <Title />\n\n            <CloseBtn />\n\n            <div className=\"md:flex mt-6\">\n                <PanelConfiguration />\n                <WebMapSelector />\n            </div>\n        </div>\n    );\n};\n\nexport default ControlPanel;\n","import React from 'react';\n\nimport { useDispatch, useSelector } from 'react-redux';\nimport ControlPanel from './ControlPanel';\nimport { isControlPanelVisibleSelector } from '../../store/reducers/UI';\n\nconst ControlPanelContainer = () => {\n    const isVisible = useSelector(isControlPanelVisibleSelector);\n\n    if (!isVisible) {\n        return null;\n    }\n\n    return <ControlPanel />;\n};\n\nexport default ControlPanelContainer;\n","import React, { useEffect, useLayoutEffect, useRef } from 'react';\n\nimport { loadModules, loadCss } from 'esri-loader';\nimport IMapView from 'esri/views/MapView';\nimport IWebMap from 'esri/WebMap';\nimport IPoint from 'esri/geometry/Point';\nimport IExtent from 'esri/geometry/Extent';\nimport IwatchUtils from 'esri/core/watchUtils';\nimport IZoom from 'esri/widgets/Zoom';\nimport { MapCenter } from '../../store/reducers/Map';\nimport { setHashParam } from '../../utils/URLHashParams';\n\nloadCss('https://js.arcgis.com/4.21/esri/themes/dark/main.css');\n\ninterface Props {\n    webmapId: string;\n    center: MapCenter;\n    zoom: number;\n    isActiveMapPanel: boolean;\n    centerOnChange: (center: MapCenter) => void;\n    zoomOnChange: (zoom: number) => void;\n    scaleOnChange: (scale: number) => void;\n    extentOnChange: (extent: IExtent) => void;\n    children?: React.ReactNode;\n}\n\nconst ZOOM_STEP_FACTOR = 0.6;\n\nconst MapView: React.FC<Props> = ({\n    webmapId,\n    center,\n    zoom,\n    isActiveMapPanel,\n    centerOnChange,\n    zoomOnChange,\n    extentOnChange,\n    scaleOnChange,\n    children,\n}: Props) => {\n    const mapDivRef = React.useRef<HTMLDivElement>();\n\n    const isActiveMapRef = useRef<boolean>(isActiveMapPanel);\n\n    const shouldTriggerExtentOnChangeRef = useRef<boolean>(true);\n\n    const mapContainerSizeRef = useRef<string>();\n\n    const [mapView, setMapView] = React.useState<IMapView>(null);\n\n    const initMapView = async () => {\n        type Modules = [typeof IMapView, typeof IWebMap, typeof IZoom];\n\n        try {\n            const [MapView, WebMap, Zoom] = await (loadModules([\n                'esri/views/MapView',\n                'esri/WebMap',\n                'esri/widgets/Zoom',\n            ]) as Promise<Modules>);\n\n            const { lon, lat } = center;\n\n            const view = new MapView({\n                container: mapDivRef.current,\n                map: new WebMap({\n                    portalItem: {\n                        id: webmapId,\n                    },\n                }),\n                zoom,\n                center: [lon, lat],\n                navigation: {\n                    mouseWheelZoomEnabled: false,\n                    browserTouchPanEnabled: false,\n                },\n                constraints: {\n                    rotationEnabled: false,\n                },\n                ui: {\n                    components: [],\n                },\n                background: {\n                    color: '#000',\n                },\n            });\n\n            const zoomWidget = new Zoom({\n                view,\n            });\n\n            view.ui.add(zoomWidget, 'top-right');\n\n            view.when(() => {\n                setMapView(view);\n            });\n        } catch (err) {\n            console.error(err);\n        }\n    };\n\n    const updateWebmap = async () => {\n        type Modules = [typeof IWebMap];\n\n        try {\n            const [WebMap] = await (loadModules(['esri/WebMap']) as Promise<\n                Modules\n            >);\n\n            mapView.map = new WebMap({\n                portalItem: {\n                    id: webmapId,\n                },\n            });\n        } catch (err) {\n            console.error(err);\n        }\n    };\n\n    const canZoomRef = useRef<boolean>(true);\n\n    // the type of the input view is IMapView, setting it to any because need to access the view.mapViewNavigation object, which is a private property,\n    // therefore has to use any as it's type so the IDE won't throw error\n    const addMouseWheelEvent = async (view: any) => {\n        view.on('mouse-wheel', (event: WheelEvent) => {\n            if (!canZoomRef.current) {\n                return;\n            }\n\n            const navigation = view.mapViewNavigation;\n\n            // deltaY value is positive when wheel is scrolled up\n            // and it is negative when wheel is scrolled down.\n            const { deltaY } = event;\n            const scaleFactor = 1 / ZOOM_STEP_FACTOR ** ((1 / 60) * deltaY);\n            const promise = navigation.zoom(scaleFactor);\n\n            if (promise) {\n                canZoomRef.current = false;\n                promise\n                    //   .catch(() => {})\n                    .then(() => {\n                        canZoomRef.current = true;\n                        navigation.end();\n                    });\n            }\n        });\n    };\n\n    const addWatchEvent = async () => {\n        type Modules = [typeof IwatchUtils];\n\n        try {\n            const [watchUtils] = await (loadModules([\n                'esri/core/watchUtils',\n            ]) as Promise<Modules>);\n\n            // watchUtils.watch(mapView, 'zoom', (zoom: number) => {\n            //     // console.log('zoom on change', zoom)\n            //     shouldTriggerExtentOnChangeRef.current = true;\n            // });\n\n            watchUtils.watch(mapView, 'center', (center: IPoint) => {\n                // console.log('map center on change', center)\n                const { longitude, latitude } = center;\n\n                if (isActiveMapRef.current) {\n                    centerOnChange({\n                        lon: longitude,\n                        lat: latitude,\n                    });\n                }\n            });\n\n            watchUtils.whenTrue(mapView, 'stationary', () => {\n                if (mapView.zoom === -1) {\n                    return;\n                }\n\n                if (isActiveMapRef.current) {\n                    extentOnChange(mapView.extent);\n                    zoomOnChange(mapView.zoom);\n\n                    const { longitude, latitude } = mapView.center;\n                    setHashParam(\n                        'center',\n                        `${longitude.toFixed(3)},${latitude.toFixed(3)}`\n                    );\n                }\n\n                const containerSize = `${mapView.width}#${mapView.height}`;\n                // console.log(containerSize, mapContainerSizeRef.current)\n\n                if (\n                    shouldTriggerExtentOnChangeRef.current ||\n                    mapContainerSizeRef.current !== containerSize\n                ) {\n                    shouldTriggerExtentOnChangeRef.current = false;\n                    mapContainerSizeRef.current = containerSize;\n                    extentOnChange(mapView.extent);\n                }\n\n                scaleOnChange(mapView.scale);\n            });\n        } catch (err) {\n            console.error(err);\n        }\n    };\n\n    useEffect(() => {\n        initMapView();\n    }, []);\n\n    useEffect(() => {\n        if (mapView) {\n            addWatchEvent();\n            addMouseWheelEvent(mapView);\n        }\n    }, [mapView]);\n\n    useEffect(() => {\n        if (!mapView || isActiveMapPanel) {\n            return;\n        }\n\n        const { lon, lat } = center;\n\n        mapView.goTo(\n            {\n                center: [lon, lat],\n            },\n            {\n                duration: 100,\n            }\n        );\n    }, [center, mapView]);\n\n    useEffect(() => {\n        if (!mapView) {\n            return;\n        }\n\n        if (mapView.zoom === zoom) {\n            return;\n        }\n\n        shouldTriggerExtentOnChangeRef.current = true;\n\n        mapView.goTo({\n            zoom,\n        });\n    }, [zoom]);\n\n    useEffect(() => {\n        isActiveMapRef.current = isActiveMapPanel;\n    }, [isActiveMapPanel]);\n\n    useEffect(() => {\n        if (!mapView) {\n            return;\n        }\n\n        updateWebmap();\n    }, [webmapId]);\n\n    return (\n        <>\n            <div\n                style={{\n                    position: 'absolute',\n                    top: 0,\n                    left: 0,\n                    bottom: 0,\n                    right: 0,\n                }}\n                ref={mapDivRef}\n            ></div>\n            {mapView\n                ? React.Children.map(children, (child) => {\n                      return React.cloneElement(\n                          child as React.ReactElement<any>,\n                          {\n                              mapView,\n                          }\n                      );\n                  })\n                : null}\n        </>\n    );\n};\n\nexport default MapView;\n","import React, { CSSProperties, FC, useEffect, useRef, useState } from 'react';\nimport './ExtentBox.css';\n\nimport IMapView from 'esri/views/MapView';\nimport IPoint from 'esri/geometry/Point';\nimport { loadModules } from 'esri-loader';\nimport { useSelector } from 'react-redux';\nimport {\n    extentsSelector,\n    // relativeZoomLevelsSelector,\n    // zoomLevelsSelector,\n} from '../../store/reducers/Map';\n// import { usePrevious } from '../../hooks/usePrevious';\nimport IwatchUtils from 'esri/core/watchUtils';\nimport classnames from 'classnames';\nimport { mapPanelsInfoSelector } from '../../store/reducers/UI';\n\ntype IExtent = {\n    xmin: number;\n    ymin: number;\n    xmax: number;\n    ymax: number;\n    spatialReference: any;\n};\n\ntype Props = {\n    // extent: IExtent;\n    indexOfTargetMap: number;\n    indexOfContainerMap: number;\n    mapView?: IMapView;\n};\n\ntype BoxPosition = {\n    top: number;\n    left: number;\n    height: number;\n    width: number;\n};\n\nconst ExtentBox: FC<Props> = ({\n    // extent,\n    indexOfTargetMap,\n    indexOfContainerMap,\n    mapView,\n}: Props) => {\n    const containerRef = useRef<HTMLDivElement>();\n\n    const extents = useSelector(extentsSelector);\n\n    // const relativeZoomLevels = useSelector(relativeZoomLevelsSelector);\n\n    const { direction } = useSelector(mapPanelsInfoSelector);\n\n    const extentOfTargetMapRef = useRef<string>();\n\n    const prevZoomRef = useRef<number>();\n\n    const [pos, setPos] = useState<BoxPosition>();\n\n    const calcPos = async (extentString: string) => {\n        type Modules = [typeof IPoint];\n\n        const extent: IExtent = extentString ? JSON.parse(extentString) : null;\n\n        // console.log('calling calcPos', extent);\n\n        if (!extent) {\n            setPos(null);\n            return;\n        }\n\n        const { xmin, ymin, xmax, ymax, spatialReference } = extent;\n\n        try {\n            const [Point] = await (loadModules([\n                'esri/geometry/Point',\n            ]) as Promise<Modules>);\n\n            const pointMin: IPoint = new Point({\n                x: xmin,\n                y: ymin,\n                spatialReference,\n            });\n\n            const pointMax: IPoint = new Point({\n                x: xmax,\n                y: ymax,\n                spatialReference,\n            });\n\n            const screenPointMin = mapView.toScreen(pointMin);\n            const screenPointMax = mapView.toScreen(pointMax);\n\n            setPos({\n                left: screenPointMin.x,\n                top: screenPointMax.y,\n                width: Math.abs(screenPointMax.x - screenPointMin.x),\n                height: Math.abs(screenPointMax.y - screenPointMin.y),\n            });\n\n            // console.log(screenPointMin, screenPointMax)\n        } catch (err) {}\n    };\n\n    const addWatchEvent = async (mapView: IMapView) => {\n        type Modules = [typeof IwatchUtils];\n\n        try {\n            const [watchUtils] = await (loadModules([\n                'esri/core/watchUtils',\n            ]) as Promise<Modules>);\n\n            watchUtils.whenTrue(mapView, 'stationary', () => {\n                if (prevZoomRef.current !== mapView.zoom) {\n                    calcPos(extentOfTargetMapRef.current);\n                }\n\n                prevZoomRef.current = mapView.zoom;\n            });\n        } catch (err) {\n            console.error(err);\n        }\n    };\n\n    // useEffect(() => {\n    //     // console.log(zoomLevels)\n    // }, [zoomLevels]);\n\n    useEffect(() => {\n        if (mapView) {\n            addWatchEvent(mapView);\n        }\n    }, [mapView]);\n\n    useEffect(() => {\n        if (extentOfTargetMapRef.current === extents[indexOfTargetMap]) {\n            return;\n        }\n\n        // check if the extent change is triggered by center change\n        if (extentOfTargetMapRef.current) {\n            // current extent\n            const ext1 = JSON.parse(extentOfTargetMapRef.current) as IExtent;\n            // new extent\n            const ext2 = JSON.parse(extents[indexOfTargetMap]) as IExtent;\n\n            const diffX1 = Math.floor(Math.abs(ext1.xmin - ext1.xmax));\n            const diffY1 = Math.floor(Math.abs(ext1.ymin - ext1.ymax));\n\n            const diffX2 = Math.floor(Math.abs(ext2.xmin - ext2.xmax));\n            const diffY2 = Math.floor(Math.abs(ext2.ymin - ext2.ymax));\n\n            if (diffX1 === diffX2 && diffY1 === diffY2) {\n                return;\n            }\n        }\n\n        extentOfTargetMapRef.current = extents[indexOfTargetMap];\n\n        calcPos(extentOfTargetMapRef.current);\n    }, [extents]);\n\n    const getStyle = (): CSSProperties => {\n        const { top, left, height, width } = pos;\n\n        if (top < 0 || left < 0) {\n            return {\n                display: 'none',\n            };\n        }\n\n        return {\n            top,\n            left,\n            height,\n            width,\n            display: 'block',\n            boxShadow: '0 0 5px 2px rgba(0,0,0,.75)',\n        };\n    };\n\n    if (!mapView || !pos) {\n        return null;\n    }\n\n    return (\n        <div\n            ref={containerRef}\n            className={classnames(\n                'absolute border border-white border-opacity-50 pointer-events-none',\n                {\n                    'arrow-horizontal': direction === 'horizontal',\n                    'arrow-vertical': direction === 'vertical',\n                    'to-left': indexOfTargetMap < indexOfContainerMap,\n                    'to-right': indexOfTargetMap > indexOfContainerMap,\n                    'to-top': indexOfTargetMap < indexOfContainerMap,\n                    'to-bottom': indexOfTargetMap > indexOfContainerMap,\n                }\n            )}\n            style={getStyle()}\n        ></div>\n    );\n};\n\nexport default ExtentBox;\n","import React, { useCallback, useEffect, useMemo } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport {\n    MapCenter,\n    mapCenterChanged,\n    MapCenterSelector,\n    webmapIdSelector,\n    updateZoomLevels,\n    updateExtents,\n    extentsSelector,\n    updateScale,\n} from '../../store/reducers/Map';\nimport { mapPanelsInfoSelector } from '../../store/reducers/UI';\nimport { MapView } from '../ArcGIS';\nimport ExtentBox from './ExtentBox';\n\ntype Props = {\n    isActivePanel: boolean;\n    zoom: number;\n    index: number;\n};\n\nconst MapPanel: React.FC<Props> = ({ isActivePanel, zoom, index }: Props) => {\n    const dispatch = useDispatch();\n\n    const webmapId = useSelector(webmapIdSelector);\n\n    const center = useSelector(MapCenterSelector);\n\n    // const extents = useSelector(extentsSelector);\n\n    const panelInfo = useSelector(mapPanelsInfoSelector);\n\n    const getExtentBoxes = () => {\n        const extentBoxes: JSX.Element[] = [];\n\n        for (let i = index - 1; i <= index + 1; i++) {\n            if (i === index || i === panelInfo.num || i < 0) {\n                continue;\n            }\n\n            // if (extents[i]) {\n            //     const extent = JSON.parse(extents[i]);\n\n            //     extentBoxes.push(\n            //         <ExtentBox key={extents[i] + i} extent={extent} />\n            //     );\n            // }\n\n            extentBoxes.push(\n                <ExtentBox\n                    key={i}\n                    indexOfContainerMap={index}\n                    indexOfTargetMap={i}\n                />\n            );\n        }\n\n        return extentBoxes;\n    };\n\n    return (\n        <MapView\n            webmapId={webmapId}\n            center={center}\n            zoom={zoom}\n            isActiveMapPanel={isActivePanel}\n            centerOnChange={(center: MapCenter) => {\n                dispatch(mapCenterChanged(center));\n            }}\n            zoomOnChange={(newZoom) => {\n                dispatch(updateZoomLevels(newZoom, index));\n            }}\n            extentOnChange={(extent) => {\n                // console.log('extent on change', extent)\n                dispatch(updateExtents(extent, index));\n            }}\n            scaleOnChange={(scale) => {\n                dispatch(updateScale(scale, index));\n            }}\n        >\n            {getExtentBoxes()}\n        </MapView>\n    );\n};\n\nexport default MapPanel;\n","import React from 'react';\n// import { MapPanelsDirection } from '../../store/reducers/UI';\n// import classnames from 'classnames';\n\nconst LockedIcon: JSX.Element = (\n    <svg\n        xmlns=\"http://www.w3.org/2000/svg\"\n        viewBox=\"0 0 16 16\"\n        width=\"16\"\n        height=\"16\"\n        className=\"fill-current\"\n    >\n        <path d=\"M8 1a4.012 4.012 0 0 0-4 4v2H3a1.003 1.003 0 0 0-1 1v7a1.003 1.003 0 0 0 1 1h10a1.003 1.003 0 0 0 1-1V8a1.003 1.003 0 0 0-1-1h-1V5a4.012 4.012 0 0 0-4-4zM5 5a3 3 0 0 1 6 0v2h-1V5a2 2 0 0 0-4 0v2H5zm4 2H7V5a1 1 0 0 1 2 0zm4 1v7H3V8zm-5 2h1v1H8v1h1v1H8v1H7V9h1z\" />\n    </svg>\n);\n\nconst UnlockedIcon: JSX.Element = (\n    <svg\n        xmlns=\"http://www.w3.org/2000/svg\"\n        viewBox=\"0 0 16 16\"\n        width=\"16\"\n        height=\"16\"\n        className=\"fill-current\"\n    >\n        <path d=\"M16 6V4a4 4 0 1 0-8 0v3H2a1.003 1.003 0 0 0-1 1v7a1.003 1.003 0 0 0 1 1h10a1.003 1.003 0 0 0 1-1V8a1.003 1.003 0 0 0-1-1h-1V4a1 1 0 0 1 2 0v2zm-4 2v7H2V8zm0-6a2 2 0 0 0-2 2v3H9V4a3 3 0 1 1 6 0v1h-1V4a2 2 0 0 0-2-2zM7 14H6V9h1v1h1v1H7v1h1v1H7z\" />\n    </svg>\n);\n\ntype Props = {\n    placeOnLeftSide: boolean;\n    isUnlocked: boolean;\n    onClick: () => void;\n};\n\nconst SIZE = 40;\n\nconst ZoomLock: React.FC<Props> = ({\n    placeOnLeftSide,\n    isUnlocked,\n    onClick,\n}: Props) => {\n    return (\n        <div\n            className=\"absolute bg-white text-black opacity-90 z-10 p-2 cursor-pointer flex\"\n            style={{\n                bottom: -(SIZE / 2),\n                left: placeOnLeftSide\n                    ? -(SIZE / 2)\n                    : `calc(100% - ${SIZE / 2}px)`,\n                justifyContent: placeOnLeftSide ? 'flex-end' : 'center',\n                alignItems: placeOnLeftSide ? 'center' : 'flex-start',\n                width: SIZE,\n                height: SIZE,\n                borderRadius: '50%',\n                boxShadow: '0 0 10px #000',\n            }}\n            onClick={onClick}\n        >\n            <div\n                className=\"absolute\"\n                style={{\n                    top: placeOnLeftSide ? 'unset' : 2,\n                    right: placeOnLeftSide ? 2 : 'unset',\n                }}\n            >\n                {isUnlocked ? UnlockedIcon : LockedIcon}\n            </div>\n        </div>\n    );\n};\n\nexport default ZoomLock;\n","import React from 'react';\n\nimport { numberFns } from 'helper-toolkit-ts';\n\ntype Props = {\n    scale?: number;\n};\n\nconst ScaleIndicator: React.FC<Props> = ({ scale }: Props) => {\n    if (scale === 0) {\n        return null;\n    }\n\n    return (\n        <div\n            className=\"absolute bottom-0 left-0 right-0 py-1 text-white text-center italic text-sm font-medium\"\n            style={{\n                background: `\n                    linear-gradient(\n                        to top,\n                        rgba(0, 0, 0, 1) 0%,\n                        rgba(0, 0, 0, .1) 80%,\n                        rgba(0, 0, 0, 0) 100%)\n                    `,\n                textShadow: `0px 0px 6px black`,\n            }}\n        >\n            1:{numberFns.numberWithCommas(+scale.toFixed())}\n        </div>\n    );\n};\n\nexport default ScaleIndicator;\n","import React, { useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport {\n    indexOfActiveMapPanelChanged,\n    indexOfActiveMapPanelSelector,\n    relativeZoomLevelsSelector,\n    scalesSelector,\n    toggleLockRelativeZoomLevels,\n    zoomLevelsSelector,\n} from '../../store/reducers/Map';\nimport { mapPanelsInfoSelector } from '../../store/reducers/UI';\nimport MapPanel from './MapPanel';\nimport classnames from 'classnames';\nimport ZoomLock from './ZoomLock';\nimport ScaleIndicator from './ScaleIndicator';\n\nconst MapPanelsContainer = () => {\n    const dispatch = useDispatch();\n\n    const { num, direction } = useSelector(mapPanelsInfoSelector);\n\n    const isHorizontal = direction === 'horizontal';\n\n    const idxOfActiveMapPanel = useSelector(indexOfActiveMapPanelSelector);\n\n    // const [ relativeZoomLevels, setRelativeZoomLevels] = useState<number[]>(relativeZoomLevelLookup[0])\n\n    const zoomLevels = useSelector(zoomLevelsSelector);\n\n    const scales = useSelector(scalesSelector);\n\n    const relativeZoomLevels = useSelector(relativeZoomLevelsSelector);\n\n    const getPanels = () => {\n        // const { num } = panelsInfo;\n\n        const panels = [];\n\n        for (let i = 0; i < num; i++) {\n            const zoom = zoomLevels[i];\n\n            const shouldShowZoomLock = i < num - 1;\n\n            const shouldShowBorder = i === 1;\n\n            const classNames = classnames('relative', {\n                'h-1/2': !isHorizontal && num === 2,\n                'h-1/3': !isHorizontal && num === 3,\n                'w-1/2': isHorizontal && num === 2,\n                'w-1/3': isHorizontal && num === 3,\n                'border-l': shouldShowBorder && direction === 'horizontal',\n                'border-r':\n                    shouldShowBorder && direction === 'horizontal' && num > 2,\n                'border-t': shouldShowBorder && direction === 'vertical',\n                'border-b':\n                    shouldShowBorder && direction === 'vertical' && num > 2,\n                'border-white border-opacity-50': shouldShowBorder,\n            });\n\n            panels.push(\n                <div\n                    className={classNames}\n                    key={i}\n                    onMouseEnter={() => {\n                        dispatch(indexOfActiveMapPanelChanged(i));\n                    }}\n                    // style={{\n                    //     'boxShadow': '-2px 0 5px 5px rgba(0,0,0,.75)'\n                    // }}\n                >\n                    <MapPanel\n                        index={i}\n                        isActivePanel={idxOfActiveMapPanel === i}\n                        zoom={zoom}\n                    />\n\n                    <ScaleIndicator scale={scales[i]} />\n\n                    {shouldShowZoomLock && (\n                        <ZoomLock\n                            placeOnLeftSide={direction === 'vertical'}\n                            isUnlocked={\n                                relativeZoomLevels[i] === null ||\n                                relativeZoomLevels[i + 1] === null\n                            }\n                            onClick={() => {\n                                // console.log(i)\n                                dispatch(toggleLockRelativeZoomLevels(i));\n                            }}\n                        />\n                    )}\n                </div>\n            );\n        }\n\n        return panels;\n    };\n\n    // useEffect(()=>{\n    //     console.log('idxOfActiveMapPanel', idxOfActiveMapPanel)\n\n    //     if(idxOfActiveMapPanel > -1){\n    //         setRelativeZoomLevels(relativeZoomLevelLookup[idxOfActiveMapPanel])\n    //     }\n\n    // }, [idxOfActiveMapPanel]);\n\n    return (\n        <div\n            className={classnames('flex h-screen overflow-hidden', {\n                'flex-col': !isHorizontal,\n            })}\n        >\n            {getPanels()}\n        </div>\n    );\n};\n\nexport default MapPanelsContainer;\n","import './styles/index.css';\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider as ReduxProvider } from 'react-redux';\n\nimport configureAppStore, { getPreloadedState } from './store/configureStore';\n\nimport AppContextProvider from './contexts/AppContextProvider';\n\nimport { AppLayout } from './components';\n\n(async () => {\n    const preloadedState = getPreloadedState();\n\n    ReactDOM.render(\n        <React.StrictMode>\n            <ReduxProvider store={configureAppStore(preloadedState)}>\n                <AppContextProvider>\n                    <AppLayout />\n                </AppContextProvider>\n            </ReduxProvider>\n        </React.StrictMode>,\n        document.getElementById('root')\n    );\n})();\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","var scriptUrl;\nif (__webpack_require__.g.importScripts) scriptUrl = __webpack_require__.g.location + \"\";\nvar document = __webpack_require__.g.document;\nif (!scriptUrl && document) {\n\tif (document.currentScript)\n\t\tscriptUrl = document.currentScript.src\n\tif (!scriptUrl) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tif(scripts.length) scriptUrl = scripts[scripts.length - 1].src\n\t}\n}\n// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration\n// or pass an empty string (\"\") and set the __webpack_public_path__ variable from your code to use your own logic.\nif (!scriptUrl) throw new Error(\"Automatic publicPath is not supported in this browser\");\nscriptUrl = scriptUrl.replace(/#.*$/, \"\").replace(/\\?.*$/, \"\").replace(/\\/[^\\/]+$/, \"/\");\n__webpack_require__.p = scriptUrl;","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t179: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tfor(moduleId in moreModules) {\n\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t}\n\t}\n\tif(runtime) var result = runtime(__webpack_require__);\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkIds[i]] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkliving_atlas_optica\"] = self[\"webpackChunkliving_atlas_optica\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [736], () => (__webpack_require__(551)))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"sourceRoot":""}